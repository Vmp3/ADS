DROP DATABASE IF EXISTS DBPROFESSOR;
SET SQL_SAFE_UPDATES = 0;
CREATE DATABASE DBPROFESSOR;

USE DBPROFESSOR;

CREATE TABLE DOCENTE (
	IDDOCENTE INT NOT NULL PRIMARY KEY AUTO_INCREMENT
	, NOME VARCHAR(45)
);

CREATE TABLE DISCIPLINA (
	IDDISCIPLINA INT NOT NULL PRIMARY KEY AUTO_INCREMENT
	, NOME VARCHAR(45)
);

CREATE TABLE PROFESSOR (
	IDDOCENTE INT NOT NULL
	, IDDISCIPLINA INT NOT NULL
	, PRIMARY KEY (IDDOCENTE, IDDISCIPLINA)
	, FOREIGN KEY (IDDOCENTE) REFERENCES DOCENTE (IDDOCENTE)
	, FOREIGN KEY (IDDISCIPLINA) REFERENCES DISCIPLINA (IDDISCIPLINA)
);

CREATE TABLE TUTOR (
	IDDOCENTE INT NOT NULL
	, IDDISCIPLINA INT NOT NULL
	, PRIMARY KEY (IDDOCENTE, IDDISCIPLINA)
	, FOREIGN KEY (IDDOCENTE) REFERENCES DOCENTE (IDDOCENTE)
	, FOREIGN KEY (IDDISCIPLINA) REFERENCES DISCIPLINA (IDDISCIPLINA)
);

CREATE TABLE ORIENTADOR (
	IDDOCENTE INT NOT NULL
	, IDDISCIPLINA INT NOT NULL
	, PRIMARY KEY (IDDOCENTE, IDDISCIPLINA)
	, FOREIGN KEY (IDDOCENTE) REFERENCES DOCENTE (IDDOCENTE)
	, FOREIGN KEY (IDDISCIPLINA) REFERENCES DISCIPLINA (IDDISCIPLINA)
);


CREATE TABLE ALUNO (
	IDALUNO INT NOT NULL AUTO_INCREMENT,
    NOME VARCHAR(100) NOT NULL,
    DT_NASC DATE NOT NULL,
	PRIMARY KEY (IDALUNO)
);

CREATE TABLE MATRICULA (
	IDMATRICULA INT NOT NULL AUTO_INCREMENT,
    IDALUNO INT NOT NULL,
    IDDISCIPLINA INT NOT NULL,
    DT_MATRICULA DATE NOT NULL,
    PRIMARY KEY (IDMATRICULA),
    FOREIGN KEY (IDALUNO) REFERENCES ALUNO (IDALUNO),
    FOREIGN KEY (IDDISCIPLINA) REFERENCES DISCIPLINA (IDDISCIPLINA)
);


INSERT INTO DOCENTE VALUES(1, 'ANDRE');
INSERT INTO DOCENTE VALUES(2, 'LUCIANO');
INSERT INTO DOCENTE VALUES(3, 'ELI');
INSERT INTO DOCENTE VALUES(4, 'JAQUE');
INSERT INTO DOCENTE VALUES(5, 'ADRIANO');

INSERT INTO DISCIPLINA VALUES(1, 'MODELAGEM DE DADOS');
INSERT INTO DISCIPLINA VALUES(2, 'ALGORITMO');
INSERT INTO DISCIPLINA VALUES(3, 'INFRAESTRUTURA');
INSERT INTO DISCIPLINA VALUES(4, 'POO');
INSERT INTO DISCIPLINA VALUES(5, 'TCS');
INSERT INTO DISCIPLINA VALUES(6, 'SGDB');

INSERT INTO PROFESSOR VALUES(1, 1);
INSERT INTO PROFESSOR VALUES(2, 3);
INSERT INTO PROFESSOR VALUES(3, 2);
INSERT INTO PROFESSOR VALUES(4, 2);
INSERT INTO PROFESSOR VALUES(5, 4);
INSERT INTO ORIENTADOR VALUES(2, 5);
INSERT INTO ORIENTADOR VALUES(3, 5);
INSERT INTO ORIENTADOR VALUES(4, 5);
INSERT INTO TUTOR VALUES(1, 6);

ALTER TABLE DISCIPLINA

ADD COLUMN CARGA_HORARIA INT NOT NULL;

UPDATE DISCIPLINA
SET CARGA_HORARIA = 80
WHERE NOME = "MODELAGEM DE DADOS";

UPDATE DISCIPLINA
SET CARGA_HORARIA = 80
WHERE NOME = "ALGORITMO"; 

UPDATE DISCIPLINA
SET CARGA_HORARIA = 40
WHERE NOME = "INFRAESTRUTURA";

UPDATE DISCIPLINA
SET CARGA_HORARIA = 120
WHERE NOME = "POO";

UPDATE DISCIPLINA
SET CARGA_HORARIA = 160
WHERE NOME = "TCS";

UPDATE DISCIPLINA
SET CARGA_HORARIA = 80
WHERE NOME = "SGDB";



INSERT INTO ALUNO VALUES (1, "ALUNO A", "2001-04-05");
INSERT INTO ALUNO VALUES (2, "ALUNO B", "2001-04-05");
INSERT INTO ALUNO VALUES (3, "ALUNO C", "2001-04-05");
INSERT INTO ALUNO VALUES (4, "ALUNO D", "2001-04-05");
INSERT INTO ALUNO VALUES (5, "ALUNO E", "2001-04-05");

INSERT INTO MATRICULA VALUES (1, 1, 1, "2001-04-05");
INSERT INTO MATRICULA VALUES (2, 1, 2, "2001-04-05");
INSERT INTO MATRICULA VALUES (3, 2, 3, "2001-04-05");
INSERT INTO MATRICULA VALUES (4, 2, 4, "2001-04-05");
INSERT INTO MATRICULA VALUES (5, 3, 5, "2001-04-05");
INSERT INTO MATRICULA VALUES (6, 3, 6, "2001-04-05");
INSERT INTO MATRICULA VALUES (7, 4, 1, "2001-04-05");
INSERT INTO MATRICULA VALUES (8, 4, 2, "2001-04-05");
INSERT INTO MATRICULA VALUES (9, 5, 3, "2001-04-05");
INSERT INTO MATRICULA VALUES (10, 5, 4, "2001-04-05");

SELECT
	DOCENTE.IDDOCENTE,
    DOCENTE.NOME,
    DISCIPLINA.IDDISCIPLINA,
    DISCIPLINA.NOME

